#:kivy 2.3.0
#:import utils kivy.utils
#:import dp kivy.metrics.dp

<TelaLogin>:
    FloatLayout:
        # Fundo com imagem
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                source: 'res/gradient.png'
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: 'vertical'
            padding: dp(20)
            spacing: dp(10)
            size_hint: (1, 1)

            # Título com imagem
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: dp(100)
                spacing: dp(10)
                padding: dp(20)

                Image:
                    source: 'res/logo.png'
                    size_hint: None, None
                    size: dp(60), dp(60)
                    allow_stretch: True
                    keep_ratio: True

                Label:
                    text: "OceanStream"
                    font_size: "32sp"
                    bold: True
                    color: (1, 1, 1, 1)
                    halign: 'left'
                    valign: 'middle'

            # Card branco com sombra
            MDCard:
                size_hint: (1, None)
                height: dp(370)
                padding: [dp(30), dp(30), dp(30), dp(30)]
                radius: [dp(20)]
                elevation: 6
                md_bg_color: utils.get_color_from_hex("#FFFFFF")
                pos_hint: {"center_x": 0.5}

                BoxLayout:
                    orientation: 'vertical'
                    spacing: dp(15)

                    # Input Email
                    MDTextField:
                        id: email
                        hint_text: "Email"
                        mode: "rectangle"
                        size_hint_y: None
                        height: dp(56)

                    # Input Senha
                    MDTextField:
                        id: senha
                        hint_text: "Senha"
                        password: True
                        mode: "rectangle"
                        size_hint_y: None
                        height: dp(56)

                    # Botão de Login
                    MDRaisedButton:
                        text: "Entrar"
                        md_bg_color: utils.get_color_from_hex("#04949c")
                        text_color: (1, 1, 1, 1)
                        size_hint_y: None
                        height: dp(48)
                        on_release: root.submit()

                    # Mensagem de erro
                    Label:
                        id: error_message
                        text: ""
                        color: (1, 0, 0, 1)
                        font_size: "14sp"
                        halign: "center"
                        size_hint_y: None
                        height: dp(20)

                    # Link para cadastro
                    Button:
                        text: "Não possui cadastro? Clique aqui"
                        background_color: 0, 0, 0, 0
                        color: utils.get_color_from_hex("#04949c")
                        font_size: "14sp"
                        size_hint_y: None
                        height: dp(40)
                        on_press: app.root.current = 'register'  # Placeholder
